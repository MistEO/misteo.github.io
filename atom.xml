<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>肝！- EO的博客</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.misteo.top/"/>
  <updated>2018-03-09T21:34:54.896Z</updated>
  <id>http://www.misteo.top/</id>
  
  <author>
    <name>MistEO</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Ubuntu下源码编译安装最新版Shadowsocks-Qt5</title>
    <link href="http://www.misteo.top/2018/03/08/Ubuntu%E4%B8%8B%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E6%9C%80%E6%96%B0%E7%89%88Shadowsocks-Qt5/"/>
    <id>http://www.misteo.top/2018/03/08/Ubuntu下编译安装最新版Shadowsocks-Qt5/</id>
    <published>2018-03-08T03:17:35.000Z</published>
    <updated>2018-03-09T21:34:54.896Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/post_images/ss.png" alt="ss"></p><p>既然说好的打造技术博客，总的写点干货什么的，正好前些日子买个了新的ss服务，买完一看加密方式是<code>chacha20-ietf-poly1305</code>，再一看Shadowsocks-Qt5在Ubuntu的软件源里面最新版本只是2.9，不支持啊，退款又退不了很尴尬，于是只能自己研究一下怎么弄了，遇到了不少坑，和大家分享一下经验方法。<br><a id="more"></a></p><h2 id="卸载旧版本Shadowsocks-Qt5"><a href="#卸载旧版本Shadowsocks-Qt5" class="headerlink" title="卸载旧版本Shadowsocks-Qt5"></a>卸载旧版本<code>Shadowsocks-Qt5</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get purge shadowsocks-qt5</span><br></pre></td></tr></table></figure><h2 id="安装libsodium"><a href="#安装libsodium" class="headerlink" title="安装libsodium"></a>安装<code>libsodium</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libsodium-dev</span><br></pre></td></tr></table></figure><h2 id="安装libbotan-2-x"><a href="#安装libbotan-2-x" class="headerlink" title="安装libbotan-2.x"></a>安装<code>libbotan-2.x</code></h2><p>下载解压编译安装，没啥好说的，可以访问<a href="https://botan.randombit.net/releases/" target="_blank" rel="noopener">Botan-Index of release</a> 获取最新本版，虽说新版本好像也没啥用XD<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget https://botan.randombit.net/releases/Botan-2.3.0.tgz</span><br><span class="line">tar xvf Botan-2.3.0.tgz</span><br><span class="line">cd Botan-2.3.0</span><br><span class="line">./configure.py</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure></p><h2 id="安装libQtShadowsocks"><a href="#安装libQtShadowsocks" class="headerlink" title="安装libQtShadowsocks"></a>安装<code>libQtShadowsocks</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install qt5-qmake qtbase5-dev libqrencode-dev libqtshadowsocks-dev libappindicator-dev libzbar-dev libbotan1.10-dev</span><br><span class="line">git clone https://github.com/shadowsocks/libQtShadowsocks.git</span><br><span class="line">mkdir build</span><br><span class="line">cd build</span><br><span class="line">cmake ..</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><p>如果软件源中没有libqtshadowsocks-dev，可以使用pip安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python-pip</span><br><span class="line">sudo pip install shadowsocks</span><br></pre></td></tr></table></figure></p><p>如果原先安装过Qt，可能会提示找不到Qt目录，导入环境变量，然后重新编译安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export LD_LIBRARY_PATH=/opt/Qt5.10.0/5.10.0/gcc_64/lib/</span><br><span class="line">rm -rf *    #删除build文件夹中文件</span><br><span class="line">cmake ..</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure></p><h2 id="安装Shadowsocks-Qt5"><a href="#安装Shadowsocks-Qt5" class="headerlink" title="安装Shadowsocks-Qt5"></a>安装<code>Shadowsocks-Qt5</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install qt5-qmake qtbase5-dev libqrencode-dev libqtshadowsocks-dev libappindicator-dev libzbar-dev libbotan1.10-dev</span><br><span class="line">git clone https://github.com/shadowsocks/shadowsocks-qt5.git</span><br><span class="line">cd shadowsocks-qt5</span><br><span class="line">mkdir build</span><br><span class="line">cd build</span><br><span class="line">cmake ..</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><p>如果提示找不到Qt目录，编辑<code>CMakeLists.txt</code>，加入一行并保存<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set(CMAKE_PREFIX_PATH &quot;/opt/Qt5.10.0/5.10.0/gcc_64&quot;)</span><br></pre></td></tr></table></figure></p><p>然后重新编译安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rm -rf *    #删除build文件夹中文件</span><br><span class="line">cmake ..</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure></p><h2 id="启动Shadowsocks-Qt5"><a href="#启动Shadowsocks-Qt5" class="headerlink" title="启动Shadowsocks-Qt5"></a>启动<code>Shadowsocks-Qt5</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss-qt5</span><br></pre></td></tr></table></figure><p>若提示<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ss-qt5: /usr/lib/x86_64-linux-gnu/libQt5DBus.so.5: version `Qt_5&apos; not found (required by ss-qt5)</span><br><span class="line">ss-qt5: /usr/lib/x86_64-linux-gnu/libQt5Network.so.5: version `Qt_5&apos; not found (required by ss-qt5)</span><br><span class="line">ss-qt5: /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5: version `Qt_5&apos; not found (required by ss-qt5)</span><br><span class="line">ss-qt5: /usr/lib/x86_64-linux-gnu/libQt5Core.so.5: version `Qt_5.10&apos; not found (required by ss-qt5)</span><br><span class="line">ss-qt5: /usr/lib/x86_64-linux-gnu/libQt5Core.so.5: version `Qt_5&apos; not found (required by ss-qt5)</span><br><span class="line">ss-qt5: /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5: version `Qt_5&apos; not found (required by ss-qt5)</span><br></pre></td></tr></table></figure></p><p>则还是环境变量的问题，导入后重新启动即可<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export LD_LIBRARY_PATH=/opt/Qt5.10.0/5.10.0/gcc_64/lib</span><br><span class="line">ss-qt5</span><br></pre></td></tr></table></figure></p><p>启动后在<code>帮助</code>-<code>关于</code>查看一下版本号若是新版就ok了<br><img src="/post_images/ss-qt5.png" alt="ss-qt5"></p><p>这时手动添加一个新连接，就已经可以看到加密方式中有<code>chacha20-ietf-poly1305</code>选项了<br><img src="/post_images/ss-connect.png" alt="配置新连接"></p><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>可以写个sh，放到桌面双击启动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#/bin/bash</span><br><span class="line">export LD_LIBRARY_PATH=/opt/Qt5.10.0/5.10.0/gcc_64/lib</span><br><span class="line">ss-qt5</span><br></pre></td></tr></table></figure></p><p>将<code>文件管理器</code>-<code>编辑</code>-<code>首选项</code>-<code>行为</code>-<code>可执行文本文件</code>修改为<code>打开可执行文本文件时运行它们</code>即可，别忘了给sh脚本执行权限哦<br><img src="/post_images/file-settings.png" alt="文件行为设置"></p><p>顺便说一下命令行中如何使用ss，以及<code>method chacha20-ietf-poly1305 not supported</code>咋解决</p><p>新建json文件，内容格式如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;server&quot;: &quot;1.2.3.4&quot;,</span><br><span class="line">    &quot;server_port&quot;: &quot;1234&quot;,</span><br><span class="line">    &quot;password&quot;: &quot;1234567&quot;</span><br><span class="line">    &quot;local_address&quot;: &quot;127.0.0.1&quot;,</span><br><span class="line">    &quot;local_port&quot;: 1080,</span><br><span class="line">    &quot;timeout&quot;:300,</span><br><span class="line">    &quot;method&quot;:&quot;chacha20-ietf-poly1305&quot;,</span><br><span class="line">    &quot;fast_open&quot;: false,</span><br><span class="line">    &quot;workers&quot;: 1&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>然后安装并从文件中配置即可<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install https://github.com/shadowsocks/shadowsocks/archive/master.zip -U</span><br><span class="line">sslocal -c xxx.json</span><br></pre></td></tr></table></figure></p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://github.com/shadowsocks/shadowsocks-qt5/issues/595#issue" target="_blank" rel="noopener">Add support for chacha20-ietf-poly1305 #595</a></li><li><a href="http://www.lujza.me/kali-linux-%E4%B8%8B%E5%AE%89%E8%A3%85-shadowsocks-qt5-%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B.html" target="_blank" rel="noopener">Kali Linux 下安装 Shadowsocks-qt5 及使用教程</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/post_images/ss.png&quot; alt=&quot;ss&quot;&gt;&lt;/p&gt;
&lt;p&gt;既然说好的打造技术博客，总的写点干货什么的，正好前些日子买个了新的ss服务，买完一看加密方式是&lt;code&gt;chacha20-ietf-poly1305&lt;/code&gt;，再一看Shadowsocks-Qt5在Ubuntu的软件源里面最新版本只是2.9，不支持啊，退款又退不了很尴尬，于是只能自己研究一下怎么弄了，遇到了不少坑，和大家分享一下经验方法。&lt;br&gt;
    
    </summary>
    
    
      <category term="教程" scheme="http://www.misteo.top/tags/%E6%95%99%E7%A8%8B/"/>
    
      <category term="Linux" scheme="http://www.misteo.top/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Hello Hexo</title>
    <link href="http://www.misteo.top/2018/03/07/Hello-World/"/>
    <id>http://www.misteo.top/2018/03/07/Hello-World/</id>
    <published>2018-03-07T09:23:47.000Z</published>
    <updated>2018-03-08T03:18:08.095Z</updated>
    
    <content type="html"><![CDATA[<p>emmm，这大概就是第一篇博文了</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;emmm，这大概就是第一篇博文了&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="吐槽" scheme="http://www.misteo.top/tags/%E5%90%90%E6%A7%BD/"/>
    
  </entry>
  
</feed>
